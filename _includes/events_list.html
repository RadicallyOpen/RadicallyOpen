

{% for event in site.data.events %}

{% capture nowunix %}{{site.time| date: '%s'}}{% endcapture %}
{% capture addedtime %}{{event.added | date: '%s'}}{% endcapture %}
{% capture dateofevent %}{{event.from | date: '%s'}}{% endcapture %}
{% assign nowunix = nowunix | plus: 0 %}
{% assign dateofevent = dateofevent | plus: 0 %}
{% assign addedtime = addedtime | plus: 0 %}
{% assign inonemonth = nowunix | plus: 60*60*24*30 %}


{% if event.hide %}{%else%}
<div  itemscope itemtype="http://data-vocabulary.org/Event">
<h4>
  <a href="/events/{{event.slug}}.html">
    <span itemprop="summary">{{event.name}}, {{event.location}}</span>
  </a>
</h4>

<ul>
  {% for part in event.parts %}
<li>
  {% if part.to %}
    <time itemprop="startDate" datetime="{{part.from|date: '%FT%R'}}">{{part.from|date: '%-d %B'}}</time>
      to
    <time itemprop="startDate" datetime="{{part.to|date: '%FT%R'}}">{{part.to|date: '%-d %B, %Y'}}</time>
    {% if forloop.length > 1 %}(part {{forloop.index}}){% endif %}
    {% else %}
    <time itemprop="startDate" datetime="{{part.from|date: '%FT%R'}}">{{part.from|date: '%-d %B, %Y'}}</time>
  {% endif %}
</li>
{% endfor %}

</ul>
</div>
{% endif %}
{% endfor %}

